schedule
========

Tasks
-----

- ...
- 验证码问题
- js逆向

Activities
----------

- ...
- 2024/7/21 学习ui自动化
- 2024/7/10 复制一个网站

resource
========

博客
----

### [谢小飞](https://xieyufei.com/2021/11/09/Chrome-Plugin.html)

制作镜像网站
============

效果
----

![image-20240718174401167](https://raw.githubusercontent.com/Cipivious/my_try/main/img/image-20240718174401167.png)

制作过程
--------

这两天我制作了一个网站的镜像网站，感觉效果还不错，下面是制作的具体过程。

1. 开始的时候我是尝试用wget来制作的，wget是gnu的一个强大的工具，主要就用于下载网页

2. 我携带了登录的cookies.txt 来制作的,下面是一个示例的文件
   ```txt
   # Netscape HTTP Cookie File
   # This file was generated by hand.
   # Edit at your own risk.
   
   .advantest.com	TRUE	/en	FALSE	0	COOKIE_SUPPORT	true
   .advantest.com	TRUE	/en	FALSE	0	GUEST_LANGUAGE_ID	en_US
   .advantest.com	TRUE	/en	FALSE	0	LFR_SESSION_STATE_10159	1721268672221
   ```

3. 在我做镜像的时候，虽然携带了cookies，但是仍然存在了一些问题，就是pdf的下载问题，还有iframe内部的内容的下载
4. 我又在缺失的地方使用python脚本调用wget来获取单个网页中的完整资源，效果还可以，就是这样导致很多资源都重复了
5. 我下载pdf的时候，不论是用requess， 还是使用wget， 都会出现下载错误，最后还是通过 selenium控制浏览器来模拟下载的
6. 下载pdf以后又手动调整了pdf的位置，才最终刻录了整个网站。
7. 不过还是存在一些问题，它有一些内容不是静态网页，而是动态加载的，对这部分网页获取的效果不好
8. 以前的网页大都是静态网页，但是现在越来越多的网站是动态加载的了，解析起来越来越难了，感觉导致爬虫都没有之前流行了



scrapy
======

分布式爬虫（scrapy-redis）
--------------------------

模拟浏览器（scrapy-splash）
---------------------------



rpa工具
=======

rpa逐步成为最近公司里流行的产品，已经有几款产品角逐出道，这几款自动化工具，本质都是用python实现的，尤其是艺赛旗，他本是就是一个py执行文件，但是它们并不好用，在提取内容方面并不方便，不能类似浏览器使用`xpath`来获取对应的内容。

影刀
----

uipath
------

uibot
-----

艺赛旗
------







ideas
=====

必坑系列续
----------

### [Windows 的cmd程序有时候会遇到`Program Files`这个文件名的问题，非常恶心](https://www.cnblogs.com/bosins/p/11326847.html)，而且几乎无解，觉得windows里面这种默认的文件名非常恶心，而且它默认的时候中国的用户目录下的文件夹名字是中文，有时候也会出问题，很烦人。

知乎续
------

写了一个小程序，导出来了知乎给我推荐的内容，也可以从中看出一些我的阅读的兴趣吧。

```text
能给大家说一个笑话吗？
白嫖不成，身败名裂！
做个很小众的应用就可以月入数万，为什么多数程序员都不做个人开发？
十年后，你会感谢曾拼命的自己吗？
七个小朋友，只能切四刀，怎么把三个苹果均分？
一瓶魔药，喝下去有一半几率实现任何愿望，一半几率直接死亡，你喝还是不喝？
为什么有的人渐渐不点外卖了？
PyPy 怎么进行打包？
我曾经在知乎听某乎友说美国有分辨率达到1mm的卫星，这个消息是真的么？
React和Vue，这两个框架哪个好找工作？推荐学习哪个？
都说“离职见人品”，你怎么看？
2024年合肥市大学排名一览表
为什么 WeGame 在国内竞争不过 Steam ？
有哪些女主聪慧淡定的优质古言推荐？
为什么现在的电影资源都是夸克网盘？
为什么有人觉得在简历上写 QQ 邮箱很掉分？
你们有哪些最珍藏的搞笑段子？
当年你们班第一名和最后一名的人都在干吗？
25岁送外卖很丢人吗?
为什么Vue在国际上越来越没影响力？
如果我违反了开源协议，不公开源代码，那别人怎么样知道我违反了协议呢?
VGN又掀桌子了,ATK87半铝199起
云南人吃菌子会有多疯狂？
你听过什么笑话和段子，让你能笑好久？
永久MSoffice365+onedrive云盘5T可挂alist
如何投诉支付宝？
为什么进口牛肉反而比国产牛肉更便宜？
徐峥新电影还没有上映就被外卖员吐槽
如何成为一个象棋高手？
今天的你存款有多少？
安琪拉百发百中的秘诀，让你的准度堪比职业选手
小舅子车祸没了，他媳妇现在想打掉肚子里8个月的孩子，我当如何劝说挽救这个未出生的宝宝？
前端开发最重要的技能是什么？
这GDP不太对啊
有什么笑到停不下来的笑话？
最美潘金莲饰演者，你认为是哪一位？
你什么时候意识到自己见过世面了？
一天抽了18根烟是什么体验？
破晓仅30%穿透，碎星锤却高达40%穿透，为何射手几乎都出破晓了？
苹果发布7B开源LLM
哪些笑话能让你笑上一辈子？
你为什么从 TP-LINK 离职？
土豆切半，包裹在树上会发生什么？
如果再不控制AI，危险性将不堪设想！
为什么拼多多敢公然卖盗版书？
拜访过100位老狐狸，才明白的人情世故
为什么vue3的api这么多？
你真的很难去想象，放着珍贵的海参不吃，却挑着里面的虫子吃，都不知道多美味。
黄蓉死在襄阳的时候，黄药师为什么不来救女儿？
终于明白有些镜头为啥只有特写！下半身有多尴尬，只有导演知道
英语介词，这样学很轻松
在教育过程当中，应不应该打孩子？
一只狗“闻你裤裆”，不是因为你脏，不要误会它了！
安琪拉的激光烧烤架能挑战成功吗！
渣男为什么不缺女人？
送外卖一天17个小时可以快速还债吗？
不愧是水刊！简直不要太好投的计算机sci
Ubuntu的LTS版本会不会由于5年到了而无法正常使用？
现女友后腰、胸、腰侧纹了前男友的名字，我发现后实在难受，该怎么办？
红酒杯想变大，结果却害自己变成了奴隶！你觉得这个故事在表达什么？
《西游记》里，孙悟空为什么不找如来报仇？
有哪些经典的对话神回复段子？
31马赫是什么概念？
宋江和刘备相比如何？
手机系统界劳模，Color OS获得最流畅称号
韩国人知道自己的国家小吗？?
有没有让人笑喷的段子？
复旦大学插班生上岸经验
如何评价Java框架若依?
公孙瓒明知道赵云很能打，为什么愿意让他跟刘备走？
这个螃蟹真可怜，竟然被小日子整天欺负
古代男子为什么要纳妾？
是什么样的笑话让你笑了十几年？
有什么是到了韩国才知道的事？
我在北京坐完“萝卜快跑”，想对司机说：别慌
```



浏览器插件
==========

浏览器插件的制作基本步骤
------------------------

### 类似下面创建需要的文件

![image-20240723141152802](https://raw.githubusercontent.com/Cipivious/my_try/main/img/image-20240723141152802.png)

### manifest.json

```json
{
    "manifest_version": 3,
    "name": "Baidu Disk Cleaner",
    "version": "1.1",
    "description": "Check a page element value and open Baidu Disk Cleaner if needed.",
    "permissions": [
      "tabs",
      "activeTab",
      "storage",
      "scripting",
      "alarms"
    ],
    "background": {
      "service_worker": "background.js"
    },
    "action": {
      "default_popup": "popup.html"
    },
    "host_permissions": [
      "https://*/*",
      "http://*/*"
    ],
    "content_security_policy": {
      "extension_pages": "script-src 'self'; object-src 'self';"
    }
  }
}
```

### background.js

```js
chrome.runtime.onInstalled.addListener(() => {
  console.log('Baidu Disk Cleaner installed');
  
  // 默认设置，如果没有设置过
  chrome.storage.sync.get(['thresholdValue', 'checkInterval', 'deleteCount'], (data) => {
    if (!data.checkInterval) {
      // 设置一个默认的间隔时间，例如 60 分钟
      chrome.storage.sync.set({ checkInterval: 60 });
      data.checkInterval = 60;
    }
    
    chrome.alarms.create('checkQuota', { periodInMinutes: data.checkInterval });
  });
});

// 在网页加载或刷新时执行任务
chrome.tabs.onUpdated.addListener((tabId, changeInfo, tab) => {
  if (changeInfo.status === 'complete') {
    console.log(`Tab ${tabId} updated with URL: ${tab.url}`);
    
    if (tab.url.startsWith('https://pan.baidu.com/disk/main')) {
      console.log('Executing content_main.js');
      chrome.scripting.executeScript({
        target: { tabId: tab.id },
        files: ['content_main.js'] // 执行 content_main.js
      });
    } else if (tab.url.startsWith('https://pan.baidu.com/disk/clear/list#/duplicate/')) {
      console.log('Executing content_clearist.js');
      chrome.scripting.executeScript({
        target: { tabId: tab.id },
        files: ['content_clearist.js'] // 执行 content_clearist.js
      });
    } else if (tab.url === 'https://pan.baidu.com/disk/clear') {
      console.log('Executing content_clear.js');
      chrome.scripting.executeScript({
        target: { tabId: tab.id },
        files: ['content_clear.js'] // 执行 content_clear.js
      });
    }
  }
});

// 定时执行任务
chrome.alarms.onAlarm.addListener((alarm) => {
  if (alarm.name === 'checkQuota') {
    chrome.tabs.query({ active: true, currentWindow: true }, (tabs) => {
      if (tabs[0]) {
        console.log(`Alarm triggered with URL: ${tabs[0].url}`);
        
        if (tabs[0].url.startsWith('https://pan.baidu.com/disk/main')) {
          console.log('Executing content_main.js');
          chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            files: ['content_main.js'] // 执行 content_main.js
          });
        } else if (tabs[0].url.startsWith('https://pan.baidu.com/disk/clear/list#/duplicate/')) {
          console.log('Executing content_clearist.js');
          chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            files: ['content_clearist.js'] // 执行 content_clearist.js
          });
        } else if (tabs[0].url === 'https://pan.baidu.com/disk/clear') {
          console.log('Executing content_clear.js');
          chrome.scripting.executeScript({
            target: { tabId: tabs[0].id },
            files: ['content_clear.js'] // 执行 content_clear.js
          });
        }
      }
    });
  }
});
```

### popup.html

```html
<!DOCTYPE html>
<html>
<head>
  <title>Baidu Disk Cleaner</title>
  <style>
    body {
      min-width: 250px;
      padding: 20px;
      font-family: Arial, sans-serif;
    }
  </style>
</head>
<body>
  <h1>Baidu Disk Cleaner</h1>
  <form id="settingsForm">
    <label>
      storage(such as 1024):
      <input type="number" id="thresholdValue" name="thresholdValue">
    </label>
    <br>
    <label>
      time(such as 30):
      <input type="number" id="checkInterval" name="checkInterval">
    </label>
    <br>
    <label>
      number(such as 4):
      <input type="number" id="deleteCount" name="deleteCount">
    </label>
    <br>
    <button type="submit">save</button>
  </form>
  <script src="popup.js"></script>
</body>
</html>
```

### content_main.js

```js
chrome.storage.sync.get(['thresholdValue'], (data) => {
    const thresholdValue = data.thresholdValue || 100; // 默认值为100G
  
    const quotaElement = document.querySelector('.wp-s-aside-nav__quota-body-text');
    if (quotaElement) {
      const quotaText = quotaElement.textContent.trim();
      const currentUsage = parseFloat(quotaText.split('/')[0].replace('G', ''));
  
      console.log(`Current usage: ${currentUsage}, Threshold: ${thresholdValue}`);
  
      if (currentUsage > thresholdValue) {
        console.log('Quota exceeded, proceeding with cleanup.');
  
        // 跳转到clear页面
        window.location.href = 'https://pan.baidu.com/disk/clear';
      }
    }
  });
```

